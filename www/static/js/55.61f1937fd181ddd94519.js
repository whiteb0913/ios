webpackJsonp([55],{Q0v0:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i={name:"HelloWorld",data:function(){return{chooseClass:"选择班级",chooseSubject:"选择科目",modelShow:!1,modelShow1:!1,columns:["全部科目","化学","英语","语文","数学","美术"],columnClass:["选择科目","2222","英语","语文","数学","美术"],data:{title:"",educationDesc:"",images:[],videos:[]}}},methods:{returns:function(){this.$router.push({path:"/education"})},deleteThisVideo:function(t){this.data.videos.splice(t,1)},deleteThisImg:function(){this.data.images.splice(index,1)},onRead:function(t){var a=this,e=new FormData;e.append("file",t.file),this.$fileHttp(this.$api.fileUpload,e).then(function(t){0==t.code&&a.data.images.push(t.data[0])})},onReadV:function(t){var a=this,e=new FormData;e.append("file",t.file),this.$fileHttp(this.$api.fileUpload,e).then(function(t){0==t.code&&a.data.videos.push(t.data[0])})},next:function(){this.$router.push({path:"/educationdetail"})},saveOrUpdateTeachEducation:function(){var t=this;if(""!=this.data.title)if(""!=this.data.educationDesc){this.$toast.loading({mask:!0,duration:0});var a={title:this.data.title,educationDesc:this.data.educationDesc,imageUrls:this.data.images.toString(),videoUrls:this.data.videos.toString(),teacherId:JSON.parse(localStorage.getItem("zhxy_user")).id,schoolId:JSON.parse(localStorage.getItem("zhxy_user")).schoolId};this.$route.query.id&&(a.id=this.$route.query.id),this.$http_json(this.$api.education.saveOrUpdateTeachEducation,a).then(function(a){console.log(a),0==a.code?t.$router.push({path:"/education"}):t.$toast(a.msg),t.$toast.clear()})}else this.$toast("请输入内容！");else this.$toast("请输入标题！")},getEducationDetail:function(){var t=this;this.$http({url:this.$api.education.getEducationDetail},{teachEducationId:this.$route.query.id}).then(function(a){console.log(a),0==a.code&&(t.data=a.data)})}},created:function(){this.$route.query.id&&this.getEducationDetail()}},s={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",[i("div",{staticClass:"loginNavFix"},[i("img",{staticClass:"return",attrs:{src:e("Du5+"),alt:""},on:{click:t.returns}}),t._v(" "),i("p",{staticClass:"title f30 cfff text-center"},[t._v(t._s(t.$route.query.id?"编辑文章":"发布文章"))])]),t._v(" "),i("div",{staticClass:"setBox"},[i("div",{staticClass:"setTitle pl-30 f28 c333"},[t._v("\n            标题\n            "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],staticClass:"oinp",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.data.title},on:{input:function(a){a.target.composing||t.$set(t.data,"title",a.target.value)}}})]),t._v(" "),i("div",{staticClass:"home-comntent"},[i("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("内容")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.educationDesc,expression:"data.educationDesc"}],staticClass:"textarea f26 pl-30 pr-30 pt-10",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入帖子内容"},domProps:{value:t.data.educationDesc},on:{input:function(a){a.target.composing||t.$set(t.data,"educationDesc",a.target.value)}}})]),t._v(" "),i("div",{staticClass:"upload"},[i("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("图片")]),t._v(" "),i("div",{staticClass:"iploadBox"},[t._l(t.data.images,function(a,e){return i("div",{key:e,staticClass:"imgShowBox"},[i("div",{staticClass:"imgShow"},[i("img",{attrs:{src:t.$api.fileUrl+a,alt:""}}),t._v(" "),i("span",{staticClass:"closeX f20",on:{click:function(a){t.deleteThisImg(e)}}},[t._v("X")])])])}),t._v(" "),t.data.images.length<10?i("div",{staticClass:"imgShowBox"},[i("van-uploader",{attrs:{"after-read":t.onRead,accept:"image/png, image/jpeg"}},[i("img",{staticClass:"imgShow",attrs:{src:e("cW4t"),alt:""}})])],1):t._e()],2)]),t._v(" "),i("div",{staticClass:"upload mt-30"},[i("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("视频")]),t._v(" "),i("div",{staticClass:"iploadBox"},[t._l(t.data.videos,function(a,e){return i("div",{key:e,staticClass:"imgShowBox"},[i("div",{staticClass:"imgShow"},[i("video",{attrs:{src:t.$api.fileUrl+a,alt:""}}),t._v(" "),i("span",{staticClass:"closeX f20",on:{click:function(a){t.deleteThisVideo(e)}}},[t._v("X")])])])}),t._v(" "),t.data.videos.length<1?i("div",{staticClass:"imgShowBox"},[i("van-uploader",{attrs:{"after-read":t.onReadV,accept:"video/*"}},[i("img",{staticClass:"imgShow",attrs:{src:e("cW4t"),alt:""}})])],1):t._e()],2)]),t._v(" "),i("div",{staticClass:"centerBtn f26 cfff text-center",on:{click:t.saveOrUpdateTeachEducation}},[t._v("发布")])])])},staticRenderFns:[]};var o=e("C7Lr")(i,s,!1,function(t){e("eEpR")},"data-v-317ed4d4",null);a.default=o.exports},eEpR:function(t,a){}});
//# sourceMappingURL=55.61f1937fd181ddd94519.js.map