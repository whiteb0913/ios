webpackJsonp([39],{"7tsS":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("hUua");var i=a("5pFn"),s={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App",title:"",data:{imageUrl:[],videoUrl:[],coverImage:""},shows:!1,videosrc:""}},methods:{returns:function(){this.$router.go(-1)},save:function(){var t=this;if(1==this.$route.query.type){var e={classesId:JSON.parse(localStorage.getItem("zhxy_user")).classesId,coverImage:this.data.coverImage,honourDesc:this.data.honourDesc,imageUrls:this.data.imageUrl.toString(),videoUrls:this.data.videoUrl.toString(),teacherId:JSON.parse(localStorage.getItem("zhxy_user")).id,title:this.data.title};this.$route.query.id&&(e.id=this.$route.query.id),this.$http_json(this.$api.class.insertOrUpdateInfoHonour,e).then(function(e){console.log(e),0==e.code&&t.$router.push({path:"/honorList",query:{type:1}})})}else{e={classesId:JSON.parse(localStorage.getItem("zhxy_user")).classesId,coverImage:this.data.coverImage,mienDesc:this.data.mienDesc,imageUrls:this.data.imageUrl.toString(),videoUrls:this.data.videoUrl.toString(),teacherId:JSON.parse(localStorage.getItem("zhxy_user")).id,title:this.data.title};this.$route.query.id&&(e.id=this.$route.query.id),this.$http_json(this.$api.class.insertOrUpdateInfoMien,e).then(function(e){console.log(e),0==e.code&&t.$router.push({path:"/honorList",query:{type:2}})})}},getHonorDetail:function(){var t=this;this.$http({url:this.$api.class.getHonorDetail},{id:this.$route.query.id}).then(function(e){console.log(e),0==e.code&&(t.data=e.data)})},getMienDetail:function(){var t=this;this.$http({url:this.$api.class.getMienDetail},{id:this.$route.query.id}).then(function(e){console.log(e),0==e.code&&(t.data=e.data)})},show:function(t){Object(i.a)([this.$api.fileUrl+t])},onRead:function(t){var e=this,a=new FormData;a.append("file",t.file),this.$fileHttp(this.$api.fileUpload,a).then(function(t){console.log(t),0==t.code&&(e.data.coverImage=t.data[0])})},onReadImg:function(t){var e=this,a=new FormData;a.append("file",t.file),this.$fileHttp(this.$api.fileUpload,a).then(function(t){console.log(t),0==t.code&&(console.log(e.data.imageUrl),e.data.imageUrl.push(t.data[0]))})},onReadVideo:function(t){var e=this,a=new FormData;a.append("file",t.file),this.$fileHttp(this.$api.fileUpload,a).then(function(t){console.log(t),0==t.code&&e.data.videoUrl.push(t.data[0])})},videoPlay:function(t){this.shows=!0,this.videosrc=this.$api.fileUrl+t},clickOverlay:function(){document.getElementById("videos").pause()}},created:function(){var t=this.$route.query.type,e=this.$route.query.id;1==t&&e?(this.title="班级荣誉编辑",this.getHonorDetail()):2==t&&e?(this.title="表扬栏编辑",this.getMienDetail()):this.title="发布文章"}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"loginNav"},[i("img",{staticClass:"return",attrs:{src:a("Du5+"),alt:""},on:{click:t.returns}}),t._v(" "),i("p",{staticClass:"title f30 cfff text-center"},[t._v(t._s(t.title))]),t._v(" "),i("span",{staticClass:"f26 cfff pr-30",staticStyle:{position:"absolute",top:"0",right:"0","line-height":"0.84rem","z-index":"99"},on:{click:t.save}},[t._v("保存")])]),t._v(" "),i("div",{staticClass:"c333 f28",staticStyle:{padding:"0.84rem 0 1rem"}},[i("div",{staticClass:"nameBox b_line"},[i("van-uploader",{staticStyle:{width:"100%"},attrs:{"after-read":t.onRead,accept:"image/png, image/jpeg"}},[t.data.coverImage?i("img",{staticStyle:{width:"100%",height:"100%",display:"block"},attrs:{src:t.$api.fileUrl+t.data.coverImage,alt:""}}):i("div",{staticClass:"pt-90 pb-90 bs"},[i("img",{attrs:{src:a("sg1V"),alt:""}}),t._v(" "),i("p",{staticClass:"pt-60 cccc f32"},[t._v("上传封面")])])]),t._v(" "),i("div",{staticClass:"nameInput"},[i("p",[t._v("标题")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],staticClass:"name c666",attrs:{placeholder:"请输入",type:"text"},domProps:{value:t.data.title},on:{input:function(e){e.target.composing||t.$set(t.data,"title",e.target.value)}}})])],1),t._v(" "),i("div",{staticClass:"content b_line"},[i("p",{staticClass:"subtitle"},[t._v("班级简介")]),t._v(" "),1==t.$route.query.type?i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.honourDesc,expression:"data.honourDesc"}],staticClass:"c666",attrs:{placeholder:"请输入简介内容..."},domProps:{value:t.data.honourDesc},on:{input:function(e){e.target.composing||t.$set(t.data,"honourDesc",e.target.value)}}}):i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.mienDesc,expression:"data.mienDesc"}],staticClass:"c666",attrs:{placeholder:"请输入简介内容..."},domProps:{value:t.data.mienDesc},on:{input:function(e){e.target.composing||t.$set(t.data,"mienDesc",e.target.value)}}})]),t._v(" "),i("div",{staticClass:"content"},[i("p",{staticClass:"subtitle"},[t._v("图片")]),t._v(" "),i("div",{staticClass:"picture"},[t._l(t.data.imageUrl,function(e,a){return i("img",{key:a,attrs:{src:t.$api.fileUrl+e,alt:"",accept:"image/png, image/jpeg"},on:{click:function(a){t.show(e)}}})}),t._v(" "),i("van-uploader",{attrs:{"after-read":t.onReadImg}},[t.data.imageUrl.length<10?i("img",{attrs:{src:a("cW4t"),alt:""}}):t._e()])],2),t._v(" "),i("p",{staticClass:"subtitle"},[t._v("视频")]),t._v(" "),i("div",{staticClass:"picture"},[t._l(t.data.videoUrl,function(e,a){return i("video",{key:a,attrs:{src:t.$api.fileUrl+e,alt:""},on:{click:function(a){t.videoPlay(e)}}})}),t._v(" "),i("van-uploader",{attrs:{"after-read":t.onReadVideo,accept:"video/*"}},[t.data.videoUrl.length<1?i("img",{attrs:{src:a("cW4t"),alt:""}}):t._e()])],2)])]),t._v(" "),i("van-popup",{on:{clickOverlay:t.clickOverlay},model:{value:t.shows,callback:function(e){t.shows=e},expression:"shows"}},[i("video",{staticStyle:{width:"100vw"},attrs:{src:t.videosrc,id:"videos",controls:""}})])],1)},staticRenderFns:[]};var r=a("C7Lr")(s,o,!1,function(t){a("GqvU")},"data-v-53301d22",null);e.default=r.exports},GqvU:function(t,e){}});
//# sourceMappingURL=39.0ef9391f26b72daf29b6.js.map