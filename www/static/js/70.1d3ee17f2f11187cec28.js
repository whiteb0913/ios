webpackJsonp([70],{"3BqN":function(t,e){},"T/4p":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"HelloWorld",data:function(){return{chooseClass:"选择班级",chooseSubject:"选择科目",modelShow:!1,modelShow1:!1,data:{imageUrls:[],videoUrls:[],resourceDesc:"",title:""}}},methods:{returns:function(){this.$router.go(-1)},deleteThisVideo:function(t){this.data.videoUrls.splice(t,1)},deleteThisImg:function(t){this.data.imageUrls.splice(t,1)},next:function(){this.$router.push({path:"/teachingresourcesdetail"})},onRead:function(t){var e=this,a=new FormData;a.append("file",t.file),this.$fileHttp(this.$api.fileUpload,a).then(function(t){0==t.code&&e.data.imageUrls.push(t.data[0])})},onReadV:function(t){var e=this,a=new FormData;a.append("file",t.file),this.$fileHttp(this.$api.fileUpload,a).then(function(t){0==t.code&&e.data.videoUrls.push(t.data[0])})},getAllResourceDetail:function(){var t=this;this.$toast.loading({mask:!0,duration:0}),this.$http({url:this.$api.teachingresources.getAllResourceDetail},{id:this.$route.query.id}).then(function(e){console.log(e),0==e.code?(t.data=e.data,t.$toast.clear()):t.$toast(e.msg)},function(e){t.$toast.clear()})},saveOrUpdateTeachResource:function(){var t=this;this.$toast.loading({mask:!0,duration:0});var e={title:this.data.title,resourceDesc:this.data.resourceDesc,imageUrl:this.data.imageUrls.toString(),videoUrl:this.data.videoUrls.toString(),teacherId:JSON.parse(localStorage.getItem("zhxy_user")).id,schoolId:JSON.parse(localStorage.getItem("zhxy_user")).schoolId,origin:1};this.$route.query.id&&(e.id=this.$route.query.id),this.$http({url:this.$api.teachingresources.saveOrUpdateTeachResource},e).then(function(e){console.log(e),0==e.code?(t.$router.push({path:"/teachingresources"}),t.$toast.clear()):t.$toast(e.msg)},function(e){t.$toast.clear()})}},created:function(){this.$route.query.id&&this.getAllResourceDetail()}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"loginNavFix"},[s("img",{staticClass:"return",attrs:{src:a("Du5+"),alt:""},on:{click:t.returns}}),t._v(" "),s("p",{staticClass:"title f30 cfff text-center"},[t._v("发布文章")])]),t._v(" "),s("div",{staticClass:"setBox"},[s("div",{staticClass:"setTitle pl-30 f28 c333"},[t._v("\n            标题\n            "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.data.title,expression:"data.title"}],staticClass:"oinp",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.data.title},on:{input:function(e){e.target.composing||t.$set(t.data,"title",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"home-comntent"},[s("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("内容")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.resourceDesc,expression:"data.resourceDesc"}],staticClass:"textarea f26 pl-30 pr-30 pt-10",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入帖子内容"},domProps:{value:t.data.resourceDesc},on:{input:function(e){e.target.composing||t.$set(t.data,"resourceDesc",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"upload"},[s("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("图片")]),t._v(" "),s("div",{staticClass:"iploadBox"},[t._l(t.data.imageUrls,function(e,a){return s("div",{key:a,staticClass:"imgShowBox"},[s("div",{staticClass:"imgShow"},[s("img",{attrs:{src:t.$api.fileUrl+e,alt:""}}),t._v(" "),s("span",{staticClass:"closeX f20",on:{click:function(e){t.deleteThisImg(a)}}},[t._v("X")])])])}),t._v(" "),t.data.imageUrls.length<10?s("div",{staticClass:"imgShowBox"},[s("van-uploader",{attrs:{"after-read":t.onRead,accept:"image/png, image/jpeg"}},[s("img",{staticClass:"imgShow",attrs:{src:a("cW4t"),alt:""}})])],1):t._e()],2)]),t._v(" "),s("div",{staticClass:"upload mt-30"},[s("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("视频")]),t._v(" "),s("div",{staticClass:"iploadBox"},[t._l(t.data.videoUrls,function(e,a){return s("div",{key:a,staticClass:"imgShowBox"},[s("div",{staticClass:"imgShow"},[s("video",{attrs:{src:t.$api.fileUrl+e,alt:""}}),t._v(" "),s("span",{staticClass:"closeX f20",on:{click:function(e){t.deleteThisVideo(a)}}},[t._v("X")])])])}),t._v(" "),t.data.videoUrls.length<1?s("div",{staticClass:"imgShowBox"},[s("van-uploader",{attrs:{"after-read":t.onReadV,accept:"video/*"}},[s("img",{staticClass:"imgShow",attrs:{src:a("cW4t"),alt:""}})])],1):t._e()],2)]),t._v(" "),s("div",{staticClass:"centerBtn f26 cfff text-center",on:{click:t.saveOrUpdateTeachResource}},[t._v("发布")])])])},staticRenderFns:[]};var o=a("C7Lr")(s,i,!1,function(t){a("3BqN")},"data-v-038ec679",null);e.default=o.exports}});
//# sourceMappingURL=70.1d3ee17f2f11187cec28.js.map