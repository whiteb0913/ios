webpackJsonp([44],{"9Z0a":function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});s("hUua");var e=s("5pFn"),i={name:"HelloWorld",data:function(){return{msg:"Welcome to Your Vue.js App",data:{classIamge:"",classDesc:"",imageUrl:[],videoUrls:[]}}},methods:{returns:function(){this.$router.go(-1)},show:function(t){Object(e.a)([this.$api.fileUrl+t])},save:function(){var t=this;if(""!=this.data.classIamge)if(""!=this.data.classDesc){var a={classIamge:this.data.classIamge,id:JSON.parse(localStorage.getItem("zhxy_user")).classesId,classDesc:this.data.classDesc,imageUrls:this.data.imageUrl.toString(),videoUrls:this.data.videoUrls.toString()};this.$http_json(this.$api.class.classIntroEdit,a).then(function(a){console.log(a),0==a.code?t.$router.push({path:"/classIntro"}):t.$toast("编辑失败了！")})}else this.$toast("请输入班级简介");else this.$toast("请上传封面")},onRead:function(t){var a=this,s=new FormData;s.append("file",t.file),this.$fileHttp(this.$api.fileUpload,s).then(function(t){console.log(t),0==t.code&&(a.data.classIamge=t.data[0])})},onReadImg:function(t){var a=this,s=new FormData;s.append("file",t.file),this.$fileHttp(this.$api.fileUpload,s).then(function(t){console.log(t),0==t.code&&a.data.imageUrl.push(t.data[0])})},onReadVideo:function(t){var a=this,s=new FormData;s.append("file",t.file),this.$fileHttp(this.$api.fileUpload,s).then(function(t){console.log(t),0==t.code&&a.data.videoUrls.push(t.data[0])})},getClassInfo:function(){var t=this;this.$http({url:this.$api.class.classIntro},{classesId:JSON.parse(localStorage.getItem("zhxy_user")).classesId}).then(function(a){console.log(a),0==a.code?t.data=a.data:t.$toast(a.msg)})}},created:function(){this.getClassInfo()}},l={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"loginNav"},[e("img",{staticClass:"return",attrs:{src:s("Du5+"),alt:""},on:{click:t.returns}}),t._v(" "),e("p",{staticClass:"title f30 cfff text-center"},[t._v("班级简介设置")]),t._v(" "),e("span",{staticClass:"f26 cfff pr-30",staticStyle:{position:"absolute",top:"0",right:"0","line-height":"0.84rem","z-index":"99"},on:{click:t.save}},[t._v("保存")])]),t._v(" "),e("div",{staticClass:"c333 f28",staticStyle:{padding:"0.84rem 0 1rem"}},[e("div",{staticClass:"nameBox"},[e("van-uploader",{attrs:{"after-read":t.onRead}},[t.data.classIamge?e("img",{staticClass:"bs",staticStyle:{width:"100%",height:"100%"},attrs:{src:t.$api.fileUrl+t.data.classIamge}}):e("div",{staticClass:"pt-90 pb-90 bs"},[e("img",{attrs:{src:s("sg1V"),alt:""}}),t._v(" "),e("p",{staticClass:"pt-60 cccc f32"},[t._v("上传封面")])])])],1),t._v(" "),e("div",{staticClass:"content b_line"},[e("p",{staticClass:"subtitle"},[t._v("班级简介")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.data.classDesc,expression:"data.classDesc"}],staticClass:"c666",attrs:{placeholder:"请输入简介内容..."},domProps:{value:t.data.classDesc},on:{input:function(a){a.target.composing||t.$set(t.data,"classDesc",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"content"},[e("p",{staticClass:"subtitle"},[t._v("图片")]),t._v(" "),e("div",{staticClass:"picture"},[t._l(t.data.imageUrl,function(a,s){return e("img",{key:s,attrs:{src:t.$api.fileUrl+a,alt:""},on:{click:function(s){t.show(a)}}})}),t._v(" "),t.data.imageUrl.length<10?e("van-uploader",{attrs:{"after-read":t.onReadImg,accept:"image/png, image/jpeg"}},[e("img",{attrs:{src:s("cW4t"),alt:""}})]):t._e()],2),t._v(" "),e("p",{staticClass:"subtitle"},[t._v("视频")]),t._v(" "),e("div",{staticClass:"picture"},[t._l(t.data.videoUrls,function(a,s){return e("video",{key:s,attrs:{src:t.$api.fileUrl+a,alt:""}})}),t._v(" "),t.data.videoUrls.length<1?e("van-uploader",{staticClass:"ml-10",attrs:{"after-read":t.onReadVideo,accept:"video/*"}},[e("img",{attrs:{src:s("cW4t"),alt:""}})]):t._e()],2)])])])},staticRenderFns:[]};var c=s("C7Lr")(i,l,!1,function(t){s("gFhp")},"data-v-4616097e",null);a.default=c.exports},gFhp:function(t,a){}});
//# sourceMappingURL=44.76933efe90a18d9fb683.js.map