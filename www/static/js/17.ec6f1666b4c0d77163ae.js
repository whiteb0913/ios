webpackJsonp([17],{"+0Sc":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={name:"HelloWorld",data:function(){return{title:"",topicDesc:"",imageUrl:[],videoUrl:[]}},methods:{returns:function(){this.$router.push({path:"/classcircle"})},deleteThis:function(){alert("删除")},onRead:function(t){var s=this;console.log(t);var e=new FormData;e.append("file",t.file),this.$fileHttp(this.$api.fileUpload,e).then(function(t){console.log(t),0==t.code&&s.imageUrl.push(t.data[0])})},onReadV:function(t){var s=this,e=new FormData;e.append("file",t.file),this.$fileHttp(this.$api.fileUpload,e).then(function(t){console.log(t),0==t.code&&s.videoUrl.push(t.data[0])})},next:function(){this.$toast("发布成功"),this.$router.push({path:"/classcircledetail"})},insertSchoolTopic:function(){var t=this;if(""!=this.title)if(""!=this.topicDesc){this.$toast.loading({mask:!0,message:"加载中...",duration:0});var s={title:this.title,classesId:JSON.parse(localStorage.getItem("zhxy_user")).classesId,topicDesc:this.topicDesc,submitId:JSON.parse(localStorage.getItem("zhxy_user")).id,submitType:2,imageUrl:this.imageUrl.toString(),videoUrl:this.imageUrl.toString(),state:2};this.$http({url:this.$api.class.insertSchoolTopic},s).then(function(s){console.log(s),0==s.code?(t.$toast("发布成功"),t.$router.push({path:"/classcircle"})):t.$toast(s.msg)},function(s){t.$toast("出错了")})}else this.$toast("请输入内容");else this.$toast("请输入标题")}}},a={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("div",{staticClass:"loginNavFix"},[i("img",{staticClass:"return",attrs:{src:e("Du5+"),alt:""},on:{click:t.returns}}),t._v(" "),i("p",{staticClass:"title f30 cfff text-center"},[t._v("发布帖子")])]),t._v(" "),i("div",{staticClass:"setBox"},[i("div",{staticClass:"setTitle pl-30 f28 c333"},[t._v("\n            标题\n            "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"oinp",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.title},on:{input:function(s){s.target.composing||(t.title=s.target.value)}}})]),t._v(" "),i("div",{staticClass:"home-comntent"},[i("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("内容")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.topicDesc,expression:"topicDesc"}],staticClass:"textarea f26 pl-30 pr-30 pt-10",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入帖子内容"},domProps:{value:t.topicDesc},on:{input:function(s){s.target.composing||(t.topicDesc=s.target.value)}}})]),t._v(" "),i("div",{staticClass:"upload"},[i("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("图片")]),t._v(" "),i("div",{staticClass:"iploadBox"},[t._l(t.imageUrl,function(s,e){return i("div",{key:e,staticClass:"imgShowBox"},[i("div",{staticClass:"imgShow"},[i("img",{attrs:{src:t.$api.fileUrl+s,alt:""}}),t._v(" "),i("span",{staticClass:"closeX f20",on:{click:t.deleteThis}},[t._v("X")])])])}),t._v(" "),t.imageUrl.length<10?i("div",{staticClass:"imgShowBox"},[i("van-uploader",{attrs:{"after-read":t.onRead,accept:"image/png, image/jpeg"}},[i("img",{staticClass:"imgShow",attrs:{src:e("cW4t"),alt:""}})])],1):t._e()],2)]),t._v(" "),i("div",{staticClass:"upload mt-30"},[i("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("视频")]),t._v(" "),i("div",{staticClass:"iploadBox"},[t._l(t.videoUrl,function(s,e){return i("div",{key:e,staticClass:"imgShowBox"},[i("div",{staticClass:"imgShow"},[i("video",{attrs:{src:t.$api.fileUrl+s,alt:""}}),t._v(" "),i("span",{staticClass:"closeX f20",on:{click:t.deleteThis}},[t._v("X")])])])}),t._v(" "),t.videoUrl.length<1?i("div",{staticClass:"imgShowBox"},[i("van-uploader",{attrs:{"after-read":t.onReadV,accept:"video/*"}},[i("img",{staticClass:"imgShow",attrs:{src:e("cW4t"),alt:""}})])],1):t._e()],2)]),t._v(" "),i("div",{staticStyle:{height:"2rem"}}),t._v(" "),i("div",{staticClass:"centerBtn f26 cfff text-center",on:{click:t.insertSchoolTopic}},[t._v("发布")])])])},staticRenderFns:[]};var l=e("C7Lr")(i,a,!1,function(t){e("dsbY")},"data-v-fdcf9c9c",null);s.default=l.exports},dsbY:function(t,s){}});
//# sourceMappingURL=17.ec6f1666b4c0d77163ae.js.map