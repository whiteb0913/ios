{"version":3,"sources":["webpack:///src/views/index/homework/sethomework.vue","webpack:///./src/views/index/homework/sethomework.vue?209f","webpack:///./src/views/index/homework/sethomework.vue"],"names":["sethomework","data","modelShow","modelShow1","columnClass","columns","nowClass","nowClassId","nowSbject","nowSbjectId","homeworkDetail","title","workDesc","images","videos","columnsData","columnClassData","filters","fileTime","num","util","dateFormat","methods","returns","this","$router","push","path","deleteThis","index","replace","deleteThisV","onRead","file","_this","console","log","form","FormData","append","$fileHttp","$api","fileUpload","then","code","onReadV","_this2","onConfirm","value","classes_id","onCancel","picker","setColumnValues","values","onConfirm1","courses_id","onCancel1","next","submit","getHomeworkDetail","_this3","$http","url","homework","homeworkId","$route","query","id","i","coursesName","classesName","classesId","coursesId","defaultIndex","Number","$toast","msg","getSubject","_this4","teacherId","JSON","parse","localStorage","getItem","arr","courses_name","getClass","_this5","_this6","params","imageUrl","toString","videoUrl","setOrEditHomework","go","show","Object","image_preview","fileUrl","created","homework_sethomework","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","src","__webpack_require__","alt","on","click","_v","_s","directives","name","rawName","expression","type","placeholder","domProps","input","$event","target","composing","$set","cols","rows","_l","item","key","length","after-read","accept","_e","position","overlay","model","callback","$$v","ref","show-toolbar","cancel","confirm","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/53.a437eb077e1f56036a2a.js","sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"loginNavFix\">\r\n            <img src=\"../../../assets/login/return.jpg\" alt=\"\" class=\"return\" @click=\"returns\">\r\n            <p class=\"title f30 cfff text-center\">{{$route.query.id ? '编辑作业' : '发布作业'}}</p>\r\n        </div>\r\n        <div class=\"setBox\">\r\n            <div class=\"setTitle pl-30 f28 c333\">\r\n                标题\r\n                <input type=\"text\" class=\"oinp\" v-model=\"homeworkDetail.title\" placeholder=\"请输入\">\r\n            </div>\r\n            <div class=\"home-comntent\">\r\n                <p class=\"pl-30 f28 c333 pt-20 pb-30\">内容</p>\r\n                <textarea name=\"\" id=\"\" cols=\"30\" class=\"textarea f26 pl-30 pr-30 pt-10\" rows=\"10\" v-model=\"homeworkDetail.workDesc\" placeholder=\"请输入帖子内容\"></textarea>\r\n            </div>\r\n            <div class=\"upload\">\r\n                <p class=\"pl-30 f28 c333 pt-20 pb-30\">图片</p>\r\n                <div class=\"iploadBox\">\r\n                    <div class=\"imgShowBox\" v-for=\"(item,index) in homeworkDetail.images\" :key=\"index\" @click=\"show(item)\">\r\n                        <div class=\"imgShow\">\r\n                            <img :src=\"$api.fileUrl + item\" alt=\"\">\r\n                            <span @click=\"deleteThis(index)\" class=\"closeX f20\">X</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"imgShowBox\" v-if=\"homeworkDetail.images.length < 10\">\r\n                        <van-uploader :after-read=\"onRead\" accept=\"image/png, image/jpeg\">\r\n                            <img class=\"imgShow\" src=\"../../../assets/my/upload.png\" alt=\"\">\r\n                        </van-uploader>\r\n                        \r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"upload mt-30\">\r\n                <p class=\"pl-30 f28 c333 pt-20 pb-30\">视频</p>\r\n                <div class=\"iploadBox\">\r\n                    <div class=\"imgShowBox\" v-for=\"(item,index) in homeworkDetail.videos\" :key=\"index\">\r\n                        <div class=\"imgShow\">\r\n                            <img :src=\"$api.fileUrl + item\" alt=\"\">\r\n                            <span @click=\"deleteThisV(index)\" class=\"closeX f20\">X</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"imgShowBox\" v-if=\"homeworkDetail.videos.length < 1\">\r\n                        <van-uploader :after-read=\"onReadV\" accept=\"video/*\">\r\n                            <img class=\"imgShow\" src=\"../../../assets/my/upload.png\" alt=\"\">\r\n                        </van-uploader>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class=\"setTitle pl-30 f28 c333 mt-30 borderTop\" @click=\"modelShow=true\">\r\n                {{nowClass}}\r\n                <img src=\"\" alt=\"\">\r\n                <img class=\"msgTo\" src=\"../../../assets/my/more.png\" alt=\"\">\r\n            </div>\r\n            <div class=\"setTitle pl-30 f28 c333\"  @click=\"modelShow1=true\">\r\n                {{nowSbject}}\r\n                <img class=\"msgTo\" src=\"../../../assets/my/more.png\" alt=\"\">\r\n            </div>\r\n            <!-- <div style=\"height:1.8rem;\"></div> -->\r\n            <div class=\"centerBtn f26 cfff text-center\" @click=\"next\">发布</div>\r\n        </div>\r\n        <!-- 选择组件 -->\r\n        <van-popup v-model=\"modelShow\" position=\"bottom\" :overlay=\"true\">\r\n            <van-picker\r\n            show-toolbar\r\n            :columns=\"columnClass\"\r\n            @cancel=\"onCancel\"\r\n            @confirm=\"onConfirm\"\r\n            ref=\"pikers\"\r\n            />\r\n        </van-popup>\r\n        <van-popup v-model=\"modelShow1\" position=\"bottom\" :overlay=\"true\">\r\n            <van-picker\r\n            show-toolbar\r\n            :columns=\"columns\"\r\n            @cancel=\"onCancel1\"\r\n            @confirm=\"onConfirm1\"\r\n            />\r\n        </van-popup>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {publisFn} from '../../../lib/util'\r\nimport { ImagePreview } from 'vant';\r\nvar closeFn;\r\nexport default {\r\n    data () {\r\n        return {\r\n            modelShow:false,\r\n            modelShow1:false,\r\n            columnClass: [],\r\n            columns: [],\r\n            nowClass : '选择班级',\r\n            nowClassId : 0,\r\n            nowSbject : '选择科目',\r\n            nowSbjectId :0,\r\n            homeworkDetail:{\r\n                title : '',\r\n                workDesc : '',\r\n                images : [],\r\n                videos : []\r\n            },\r\n            columnsData:[],\r\n            columnClassData:[]\r\n        }\r\n    },\r\n    filters : {\r\n        fileTime(num){\r\n           return publisFn.dateFormat(num);\r\n        }\r\n    },\r\n    methods : {\r\n       returns(){\r\n            this.$router.push({path:'/homework'});//返回上一层\r\n        },\r\n        deleteThis(index){\r\n            this.homeworkDetail.images.replace(index,1);\r\n        },\r\n        deleteThisV(index){\r\n            this.homeworkDetail.videos.replace(index,1);\r\n        },\r\n        onRead(file) {//上传图片\r\n            console.log(file);\r\n            var form = new FormData();\r\n            form.append('file',file.file);\r\n            this.$fileHttp(this.$api.fileUpload,form).then(data => {\r\n                console.log(data);\r\n                if(data.code == 0){\r\n                    this.homeworkDetail.images.push(data.data[0]);\r\n                }\r\n            })\r\n        },\r\n        onReadV(file){\r\n            var form = new FormData();\r\n            form.append('file',file.file);\r\n            this.$fileHttp(this.$api.fileUpload,form).then(data => {\r\n                console.log(data);\r\n                if(data.code == 0){\r\n                    this.homeworkDetail.videos.push(data.data[0]);\r\n                }\r\n            })\r\n        },\r\n        onConfirm(value, index) {\r\n            this.modelShow = !this.modelShow;\r\n            this.nowClass = value[0];\r\n            this.nowClassId = this.columnClassData[index].classes_id;\r\n            // this.chooseSubject = value;\r\n        },\r\n        onCancel(picker, value, index) {    \r\n            this.modelShow = !this.modelShow;\r\n            picker.setColumnValues(1,columns[values[0]]);\r\n        },\r\n        onConfirm1(value, index) {\r\n            this.modelShow1 = !this.modelShow1;\r\n            this.nowSbject = value[0];\r\n            this.nowSbjectId = this.columnsData[index].courses_id;\r\n        },\r\n        onCancel1(picker, value, index) {    \r\n            this.modelShow1 = !this.modelShow1;\r\n        },\r\n        next(){//跳转到下一个页面\r\n            this.submit();return \r\n            this.$router.push({path:'/homeworkdetail'});\r\n        },\r\n        getHomeworkDetail(){//获取作业详情\r\n            this.$http({url:this.$api.homework.getHomeworkDetail},{homeworkId:this.$route.query.id}).then(data => {\r\n                console.log(data);\r\n                if(data.code == 0){\r\n                    this.homeworkDetail = data.data;\r\n                    this.nowSbject = data.data.coursesName;\r\n                    this.nowClass = data.data.classesName;\r\n                    this.nowClassId = data.data.classesId;\r\n                    this.nowSbjectId = data.data.coursesId;\r\n                    for(var i in this.columnsData){\r\n                        if(this.columnsData[i].courses_id == data.data.coursesId){\r\n                            this.columns[0].defaultIndex = Number(i);\r\n                            break;\r\n                        }\r\n                    }\r\n                    for(var i in this.columnClassData){\r\n                        if(this.columnClassData[i].classes_id == data.data.classesId){\r\n                            this.columnClass[0].defaultIndex = Number(i);\r\n                            break;\r\n                        }\r\n                    }\r\n                    // var nowSbject = this.nowSbject;\r\n                }else{\r\n                    this.$toast(data.msg);\r\n                }\r\n            })\r\n        },\r\n        getSubject(){//获取所有科目\r\n            var nowSbject = this.nowSbject;\r\n            this.$http({url:this.$api.homework.getSubject},{teacherId:JSON.parse(localStorage.getItem('zhxy_user')).id}).then(data => {\r\n                console.log(data);\r\n                if(data.code == 0){\r\n                    var arr = [];\r\n                    for(var i in data.data){\r\n                        arr.push(data.data[i].courses_name)\r\n                    }\r\n                    var columns = [\r\n                        {\r\n                           values : arr\r\n                        }\r\n                    ]\r\n                    this.columnsData = data.data;\r\n                    this.columns = columns;\r\n                    if(!this.$route.query.id){\r\n                        this.nowSbject = columns[0].values[0];\r\n                        this.nowSbjectId = data.data[0].courses_id;\r\n                    }else{\r\n                        this.nowSbjectId = -1;\r\n                    }\r\n                }\r\n                \r\n            }) \r\n        },\r\n        getClass(){//获取所有的班级\r\n            this.$http({url:this.$api.homework.getClass},{teacherId:JSON.parse(localStorage.getItem('zhxy_user')).id}).then(data => {\r\n                console.log(data);\r\n                if(data.code == 0){\r\n                    var arr = [];\r\n                    for(var i in data.data){\r\n                        arr.push(data.data[i].coursesName)\r\n                    }\r\n                    var columnClass = [\r\n                        {\r\n                            values : arr\r\n                        }\r\n                    ];\r\n                    this.columnClassData = data.data;\r\n                    this.columnClass = columnClass;\r\n                    if(!this.$route.query.id){\r\n                        this.nowClass = columnClass[0].values[0];\r\n                        this.nowClassId = data.data[0].classes_id;\r\n                    }else{\r\n                        this.nowClassId = -1;\r\n                    }\r\n                }\r\n                \r\n            }) \r\n        },\r\n        submit(){\r\n            if(this.homeworkDetail.title == ''){\r\n                this.$toast('请输入标题');\r\n                return\r\n            }\r\n            if(this.homeworkDetail.workDesc == ''){\r\n                this.$toast('请输入作业内容');\r\n                return\r\n            }\r\n            if(this.nowClassId == -1 || this.nowClassId == 0){\r\n                this.$toast('请选择班级');\r\n                return\r\n            }\r\n            if(this.nowSbjectId == -1 || this.nowSbjectId == 0){\r\n                this.$toast('请选择科目');\r\n                return\r\n            }\r\n            \r\n            var params = {\r\n                classesId : this.nowClassId,//班级id\r\n                teacherId :JSON.parse(localStorage.getItem('zhxy_user')).id ,//老师id\r\n                coursesId : this.nowSbjectId,//科目id\r\n                title : this.homeworkDetail.title,//标题\r\n                workDesc : this.homeworkDetail.workDesc,//详情\r\n                imageUrl : this.homeworkDetail.images.toString(),//图片路径\r\n                videoUrl : this.homeworkDetail.videos.toString()//视频路径\r\n            };\r\n            if(this.$route.query.id){\r\n                params.id = this.$route.query.id\r\n            }\r\n            this.$http({url:this.$api.homework.setOrEditHomework},params).then(data => {\r\n                console.log(data);\r\n                if(data.code == 0){\r\n                    if(this.$route.query.id){//判断id是否存在，如果存在表示编辑，调用获取详情方法\r\n                        this.$toast('编辑成功');\r\n                    }else{\r\n                        this.$toast('发布成功');\r\n                    }\r\n                    this.$router.go(-1);//返回上一层\r\n                }else{\r\n                    this.$toast(data.msg);\r\n                }\r\n            })\r\n        },\r\n        show(url){\r\n            ImagePreview([\r\n                this.$api.fileUrl + url\r\n            ]);\r\n        }\r\n    },\r\n    created() {\r\n        this.getSubject();\r\n        this.getClass();\r\n        if(this.$route.query.id){//判断id是否存在，如果存在表示编辑，调用获取详情方法\r\n            this.getHomeworkDetail();\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.setBox{position: absolute;top: 0.84rem;left: 0;right: 0;bottom: 0;overflow-y: auto;}\r\n.setTitle{height: 1.11rem;border-bottom: 1px solid #f2f2f2;line-height: 1.11rem;overflow: hidden;}\r\n.oinp{float: right;border: 0;outline: 0;width: 80%;text-align: right;padding-right: 0.2rem}\r\n.home-comntent{height: 3.74rem;border-bottom: 1px solid #f2f2f2;}\r\n.textarea{width: 100%;height: 3rem;outline: 0;border: 0;box-sizing: border-box;resize:none;}\r\n.iploadBox{margin-left: 0.3rem;overflow: hidden;}\r\n.imgShowBox{width: 20%;float: left;}\r\n.imgShow{width: 1.2rem;height: 1.2rem;border-radius: 5px;overflow: hidden;float: left;position: relative;}\r\n.imgShow img{width: 100%;height: 100%;display: block;}\r\n.closeX{position: absolute;top: 0;right: 0;padding: 0rem 0.1rem 0.05rem;}\r\n.borderTop{border-top: 1px solid #f2f2f2;}\r\n.msgTo{width: 0.3rem;height: 0.3rem;float: right;margin: 0.35rem 0.3rem 0 0;}\r\n.centerBtn{height: 0.9rem;width: 6.9rem;border-radius: 0.9rem; background: linear-gradient(to bottom right, #82cbff , #7b7ceb);line-height: 0.9rem; box-shadow: 0 0 10px #f0f9ff;margin: 0.6rem auto }\r\n\r\n</style>\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/index/homework/sethomework.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"loginNavFix\"},[_c('img',{staticClass:\"return\",attrs:{\"src\":require(\"../../../assets/login/return.jpg\"),\"alt\":\"\"},on:{\"click\":_vm.returns}}),_vm._v(\" \"),_c('p',{staticClass:\"title f30 cfff text-center\"},[_vm._v(_vm._s(_vm.$route.query.id ? '编辑作业' : '发布作业'))])]),_vm._v(\" \"),_c('div',{staticClass:\"setBox\"},[_c('div',{staticClass:\"setTitle pl-30 f28 c333\"},[_vm._v(\"\\n            标题\\n            \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.homeworkDetail.title),expression:\"homeworkDetail.title\"}],staticClass:\"oinp\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入\"},domProps:{\"value\":(_vm.homeworkDetail.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.homeworkDetail, \"title\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"home-comntent\"},[_c('p',{staticClass:\"pl-30 f28 c333 pt-20 pb-30\"},[_vm._v(\"内容\")]),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.homeworkDetail.workDesc),expression:\"homeworkDetail.workDesc\"}],staticClass:\"textarea f26 pl-30 pr-30 pt-10\",attrs:{\"name\":\"\",\"id\":\"\",\"cols\":\"30\",\"rows\":\"10\",\"placeholder\":\"请输入帖子内容\"},domProps:{\"value\":(_vm.homeworkDetail.workDesc)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.homeworkDetail, \"workDesc\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"upload\"},[_c('p',{staticClass:\"pl-30 f28 c333 pt-20 pb-30\"},[_vm._v(\"图片\")]),_vm._v(\" \"),_c('div',{staticClass:\"iploadBox\"},[_vm._l((_vm.homeworkDetail.images),function(item,index){return _c('div',{key:index,staticClass:\"imgShowBox\",on:{\"click\":function($event){_vm.show(item)}}},[_c('div',{staticClass:\"imgShow\"},[_c('img',{attrs:{\"src\":_vm.$api.fileUrl + item,\"alt\":\"\"}}),_vm._v(\" \"),_c('span',{staticClass:\"closeX f20\",on:{\"click\":function($event){_vm.deleteThis(index)}}},[_vm._v(\"X\")])])])}),_vm._v(\" \"),(_vm.homeworkDetail.images.length < 10)?_c('div',{staticClass:\"imgShowBox\"},[_c('van-uploader',{attrs:{\"after-read\":_vm.onRead,\"accept\":\"image/png, image/jpeg\"}},[_c('img',{staticClass:\"imgShow\",attrs:{\"src\":require(\"../../../assets/my/upload.png\"),\"alt\":\"\"}})])],1):_vm._e()],2)]),_vm._v(\" \"),_c('div',{staticClass:\"upload mt-30\"},[_c('p',{staticClass:\"pl-30 f28 c333 pt-20 pb-30\"},[_vm._v(\"视频\")]),_vm._v(\" \"),_c('div',{staticClass:\"iploadBox\"},[_vm._l((_vm.homeworkDetail.videos),function(item,index){return _c('div',{key:index,staticClass:\"imgShowBox\"},[_c('div',{staticClass:\"imgShow\"},[_c('img',{attrs:{\"src\":_vm.$api.fileUrl + item,\"alt\":\"\"}}),_vm._v(\" \"),_c('span',{staticClass:\"closeX f20\",on:{\"click\":function($event){_vm.deleteThisV(index)}}},[_vm._v(\"X\")])])])}),_vm._v(\" \"),(_vm.homeworkDetail.videos.length < 1)?_c('div',{staticClass:\"imgShowBox\"},[_c('van-uploader',{attrs:{\"after-read\":_vm.onReadV,\"accept\":\"video/*\"}},[_c('img',{staticClass:\"imgShow\",attrs:{\"src\":require(\"../../../assets/my/upload.png\"),\"alt\":\"\"}})])],1):_vm._e()],2)]),_vm._v(\" \"),_c('div',{staticClass:\"setTitle pl-30 f28 c333 mt-30 borderTop\",on:{\"click\":function($event){_vm.modelShow=true}}},[_vm._v(\"\\n            \"+_vm._s(_vm.nowClass)+\"\\n            \"),_c('img',{attrs:{\"src\":\"\",\"alt\":\"\"}}),_vm._v(\" \"),_c('img',{staticClass:\"msgTo\",attrs:{\"src\":require(\"../../../assets/my/more.png\"),\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"setTitle pl-30 f28 c333\",on:{\"click\":function($event){_vm.modelShow1=true}}},[_vm._v(\"\\n            \"+_vm._s(_vm.nowSbject)+\"\\n            \"),_c('img',{staticClass:\"msgTo\",attrs:{\"src\":require(\"../../../assets/my/more.png\"),\"alt\":\"\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"centerBtn f26 cfff text-center\",on:{\"click\":_vm.next}},[_vm._v(\"发布\")])]),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\",\"overlay\":true},model:{value:(_vm.modelShow),callback:function ($$v) {_vm.modelShow=$$v},expression:\"modelShow\"}},[_c('van-picker',{ref:\"pikers\",attrs:{\"show-toolbar\":\"\",\"columns\":_vm.columnClass},on:{\"cancel\":_vm.onCancel,\"confirm\":_vm.onConfirm}})],1),_vm._v(\" \"),_c('van-popup',{attrs:{\"position\":\"bottom\",\"overlay\":true},model:{value:(_vm.modelShow1),callback:function ($$v) {_vm.modelShow1=$$v},expression:\"modelShow1\"}},[_c('van-picker',{attrs:{\"show-toolbar\":\"\",\"columns\":_vm.columns},on:{\"cancel\":_vm.onCancel1,\"confirm\":_vm.onConfirm1}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-33c069a4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/index/homework/sethomework.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-33c069a4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./sethomework.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./sethomework.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./sethomework.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-33c069a4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./sethomework.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-33c069a4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/index/homework/sethomework.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}