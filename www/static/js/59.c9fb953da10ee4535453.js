webpackJsonp([59],{OeAK:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});s("hUua");var i=s("5pFn"),a={name:"HelloWorld",data:function(){return{title:"",topicDesc:"",imageUrl:[],videoUrl:[]}},methods:{returns:function(){this.$router.push({path:"/schoolcircle"})},deleteThis:function(){alert("删除")},show:function(t){Object(i.a)([this.$api.fileUrl+t])},onRead:function(t){var e=this,s=new FormData;s.append("file",t.file),this.$fileHttp(this.$api.fileUpload,s).then(function(t){console.log(t),0==t.code&&e.imageUrl.push(t.data[0])})},onReadV:function(t){var e=this,s=new FormData;s.append("file",t.file),this.$fileHttp(this.$api.fileUpload,s).then(function(t){console.log(t),0==t.code&&e.videoUrl.push(t.data[0])})},insertSchoolTopic:function(){var t=this;if(""!=this.title)if(""!=this.topicDesc){this.$toast.loading({mask:!0,message:"加载中...",duration:0});var e={classesId:JSON.parse(localStorage.getItem("zhxy_user")).classesId,title:this.title,topicDesc:this.topicDesc,submitId:JSON.parse(localStorage.getItem("zhxy_user")).id,submitType:2,state:2,imageUrl:this.imageUrl.toString(),videoUrl:this.videoUrl.toString(),schoolId:JSON.parse(localStorage.getItem("zhxy_user")).schoolId};this.$http({url:this.$api.class.classInsertSchoolTopic},e).then(function(e){console.log(e),0==e.code?(t.$toast("发布成功"),t.$router.push({path:"/schoolcircle"})):t.$toast(e.msg)},function(e){t.$toast("出错了")})}else this.$toast("请输入内容");else this.$toast("请输入标题")}},created:function(){}},o={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"loginNavFix"},[i("img",{staticClass:"return",attrs:{src:s("Du5+"),alt:""},on:{click:t.returns}}),t._v(" "),i("p",{staticClass:"title f30 cfff text-center"},[t._v("发布帖子")])]),t._v(" "),i("div",{staticClass:"setBox"},[i("div",{staticClass:"setTitle pl-30 f28 c333"},[t._v("\n            标题\n            "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"oinp",attrs:{type:"text",placeholder:"请输入"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"home-comntent"},[i("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("内容")]),t._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.topicDesc,expression:"topicDesc"}],staticClass:"textarea f26 pl-30 pr-30 pt-10",attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:"请输入帖子内容"},domProps:{value:t.topicDesc},on:{input:function(e){e.target.composing||(t.topicDesc=e.target.value)}}})]),t._v(" "),i("div",{staticClass:"upload"},[i("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("图片")]),t._v(" "),i("div",{staticClass:"iploadBox"},[t._l(t.imageUrl,function(e,s){return i("div",{key:s,staticClass:"imgShowBox"},[i("div",{staticClass:"imgShow"},[i("img",{attrs:{src:t.$api.fileUrl+e,alt:""},on:{click:function(s){t.show(e)}}}),t._v(" "),i("span",{staticClass:"closeX f20",on:{click:t.deleteThis}},[t._v("X")])])])}),t._v(" "),t.imageUrl.length<10?i("div",{staticClass:"imgShowBox"},[i("van-uploader",{attrs:{"after-read":t.onRead,accept:"image/png, image/jpeg"}},[i("img",{staticClass:"imgShow",attrs:{src:s("cW4t"),alt:""}})])],1):t._e()],2)]),t._v(" "),i("div",{staticClass:"upload mt-30"},[i("p",{staticClass:"pl-30 f28 c333 pt-20 pb-30"},[t._v("视频")]),t._v(" "),i("div",{staticClass:"iploadBox"},[t._l(t.videoUrl,function(e,s){return i("div",{key:s,staticClass:"imgShowBox"},[i("div",{staticClass:"imgShow"},[i("video",{attrs:{src:t.$api.fileUrl+e,alt:""}}),t._v(" "),i("span",{staticClass:"closeX f20",on:{click:t.deleteThis}},[t._v("X")])])])}),t._v(" "),t.videoUrl.length<1?i("div",{staticClass:"imgShowBox"},[i("van-uploader",{attrs:{"after-read":t.onReadV,accept:"video/*"}},[i("img",{staticClass:"imgShow",attrs:{src:s("cW4t"),alt:""}})])],1):t._e()],2)]),t._v(" "),i("div",{staticStyle:{height:"2rem"}}),t._v(" "),i("div",{staticClass:"centerBtn f26 cfff text-center",on:{click:t.insertSchoolTopic}},[t._v("发布")])])])},staticRenderFns:[]};var l=s("C7Lr")(a,o,!1,function(t){s("ku83")},"data-v-291312ea",null);e.default=l.exports},ku83:function(t,e){}});
//# sourceMappingURL=59.c9fb953da10ee4535453.js.map